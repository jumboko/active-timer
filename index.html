<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>活動記録タイマー</title>
 
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    // 追加
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDpG7dqCaUB8A9jd-EfdVbemN8HVOsUjSM",
      authDomain: "activity-timer-52a85.firebaseapp.com",
      projectId: "activity-timer-52a85",
      storageBucket: "activity-timer-52a85.appspot.com", // ← 修正
      messagingSenderId: "68281906785",
      appId: "1:68281906785:web:4508221d36146eb9475c20"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app); // 追加

    // 他のJSファイルで使えるようにグローバル変数として渡す
    window.firebaseDB = db; // 追加
  </script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- トップ画面 -->
  <div id="homePage" class="page active">
    <h1><ruby>活動記録<rt>かつどうきろく</rt></ruby>タイマー</h1>
    <button onclick="showPage('historyPage');">
      <ruby>記録確認<rt>きろくかくにん</rt></ruby>
    </button>
    <button onclick="showPage('recordPage')">
      <ruby>活動<rt>かつどう</rt></ruby>を<ruby>記録<rt>きろく</rt></ruby>
    </button>
  </div>

  <!-- 活動選択画面 -->
  <div id="recordPage" class="page">
    <h2><ruby>活動<rt>かつどう</rt></ruby>を<ruby>選択<rt>せんたく</rt></ruby></h2>
    <input type="text" id="newActivity" placeholder="新しい活動名" />
    <button onclick="addActivity()"><ruby>追加<rt>ついか</rt></ruby></button>
    <ul id="activityList"></ul>
    <button onclick="showPage('homePage')">← <ruby>戻<rt>もど</rt></ruby>る</button>
  </div>

  <!-- タイマー画面 -->
  <div id="timerPage" class="page">
    <h2 id="timerTitle">活動名のタイマー</h2>
    <p id="timeDisplay">0h00m00s<small>00</small></p>
    <button onclick="startTimer()" id = "startBtn">スタート</button>
    <button onclick="stopTimer()" id = "stopBtn" style="display: none">ストップ</button>
    <button onclick="resumeTimer()" id = "resumeBtn" style="display: none"><ruby>再開<rt>さいかい</rt></ruby></button>
    <button onclick="saveTimer()" id = "saveBtn" style="display: none"><ruby>登録<rt>とうろく</rt></ruby></button>
    <button onclick="resetTimer()" id = "resetBtn" style="display: none">リセット</button>
    <h3><ruby>上位記録<rt>じょういきろく</rt></ruby></h3>
    <ul id="topTimes"></ul>
    <button onclick="showPage('recordPage')">← <ruby>戻<rt>もど</rt></ruby>る</button>
    <button onclick="backTodetailPage()"><ruby>記録一覧<rt>きろくいちらん</rt></ruby>へ</button>
  </div>

  <!-- 活動記録選択画面 -->
  <div id="historyPage" class="page">
    <h2><ruby>活動記録<rt>かつどうきろく</rt></ruby>の<ruby>選択<rt>せんたく</rt></ruby></h2>
    <ul id="allActivityList"></ul>
    <button onclick="showPage('homePage')">← <ruby>戻<rt>もど</rt></ruby>る</button>
  </div>

  <!-- 活動毎の記録一覧 -->
  <div id="detailPage" class="page">
    <h2 id="detailTitle">活動名の記録</h2>
    <ul id="activityRecordList"></ul>
    <button onclick="showPage('historyPage')">← <ruby>戻<rt>もど</rt></ruby>る</button>
    <button onclick="backToTimer()">タイマー<ruby>画面<rt>がめん</rt></ruby>へ</button>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
